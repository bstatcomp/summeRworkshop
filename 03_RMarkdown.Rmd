---
title: "R Markdown"
author: "Gregor Pirs, Jure Demsar and Erik Strumbelj"
date: "25/7/2019"
output:
  prettydoc::html_pretty:
    theme: architect
    toc: no
    highlight: github
---


<div style="text-align:center">
  <img src="bstatcomp.png" alt="drawing" width="128"/>
</div>


# RMarkdown

RMarkdown is an elegant way for writing reports or scientific papers. The best thing about RMarkdown that all your code for data analysis and visualizations in included in the report so your work is presented in a completely transparent fashion. Another great thing is that if your dataset changes or updates, you just change the data and re-knit the report. Knitting is the term used for compiling reports. The package for creatking RMarkdown reports is called `rmarkdown` and is usually already installed with RStudio.


## Settings

We start by providing some basic information about our report, such as the title of the report, its date and authors. We also have to define what kind of outputs we want to create. RMarkdown can output a huge amount of document types -- pdf, html, docx, pptx, etc. For the whole list see https://rmarkdown.rstudio.com/lesson-9.html.

The code below should lie at the beginning of a RMarkdown document. In our case we will produce two output documents -- a pdf and a web page.

```
---
title: "RMarkdown example"
date: "31/1/2019"
author: "Jure Demsar and Gregor Pirs"
output:
  pdf_document: default
  html_document: default
---
```

Default designs for documents are quite dull and unpolished, luckily there are several packages that offer nicer themes. One of them is `prettydoc`.


```
output:
  prettydoc::html_pretty:
    theme: architect
    toc: yes
    highlight: github
```

## Headers

To create titles for sections and subsections we can use several levels of headers.


```
# Header 1

## Header 2

### Header 3

etc.

```


## Emphasizing 

We can emphasize certain words in our text by putting them in a `rectangle`, making them **bold** or _italic_. 

```
`rectangle`

**bold**

_italic_

```


## Lists

We can also create lists. Both ordered

1. Item 1,
2. Item 2,
3. Item 3

and unordered

* Item 1,
* Item 2,
* Item 3.

Below is the code to achieve this:

```
1. Item 1
2. Item 2
3. Item 3

* Item 1
* Item 2
* Item 3

```


## Code

The most powerful part of RMarkdown is the ability to incoporate executable code directly into our reports. We start and end a code block with \`\`\`. Next we have to define the programming langauge that will be used in the code block, we will use R, but markdown supports also Python, SQL, Bash, Rcpp, Stan, JavaScript and CSS. We define the programming language in curly brackets just after the start of the code block, for example to use R code we would use \`\`\`{r}. Besides the programming language we have a number of switches that define what will be printed out in the knitted report:

* `include = FALSE` prevents code and results from appearing in the output file. R Markdown still runs the code in the chunk, and the results can be used by other chunks.
* `echo = FALSE` prevents code, but not the results from appearing in the output file. This is a useful way to embed figures.
* `message = FALSE` prevents messages that are generated by code from appearing in the oputput file.
* `warning = FALSE` prevents warnings that are generated by code from appearing in the output file.
* `eval = FALSE` prevents execution of the code, the code is only printed out in the output file.

By default all switched described above are set to TRUE. To print only results of the code and not the code itself we would start the code chunk with \`\`\`{r, echo = FALSE}. The code below loads some data in a `data.frame` and prints out its first few rows.

```{r}
# load data
data <- read.csv("./data/temperature.csv", sep=";")
head(data)
```

We can also easily add visualizations, the image below visualizes January temperature in Slovenia through ages.

```{r, message = FALSE}
# libraries
library(dplyr)
library(ggplot2)

# filter data
january_data <- data %>% filter(country == "Slovenia" & month == 1)

ggplot(data=january_data, aes(x=year, y=temperature)) +
  geom_point() +
  geom_smooth()
```

## Equations

There are two ways to include equations in our report. The first one are inline equations, this is useful for simple equations, for example $y = x^2$ can be printed by typing the code

```
$y = x^2$
```

The equation are written in LaTeX code, we start and end the inline equation with a single dollar sign (\$). For superscript we use the `^` sign, and for subscript the `_` sign.

More complex equations are rendered separately from text, to achieve this type a double dollar sign (\$\$) at the beginning and at the end of an equation. We use this format for more complex equations, such as the Bayes' theorem:

$$P(A \mid B) = \frac{P(B \mid A) \, P(A)}{P(B)}.$$

The code for this equation is:
```
$$P(A \mid B) = \frac{P(B \mid A) \, P(A)}{P(B)}$$
```
